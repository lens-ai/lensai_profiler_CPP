<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lens AI Profiler Cpp: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Lens AI Profiler Cpp
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Lens AI Profiler Cpp Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> <img src="https://github.com/lens-ai/lensai_profiler_cpp/actions/workflows/ci.yaml/badge.svg" alt="Build Status" style="pointer-events: none;" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md0"></a>
LensAI Profiler Cpp</h1>
<p>Lensai profiler Cpp is a C++ library designed for AI model observability and data sampling in real-time, specifically focused on edge devices. The goal of lens AI is to Manage, debug, and retrain AI models at the edge efficiently. Lens AI Cpp profiler includes three libraries: <code>libimageprofiler.so</code>, <code>libimagesampler.so</code>, and <code>libmodelprofiler.so</code>. The current version of LensAI is focussed towards Vision but soon will support the other data types.</p>
<p><img src="https://raw.githubusercontent.com/lens-ai/lensai_profiler_cpp/main/blockdiagram_cpp.png" alt="Block Diagram" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md1"></a>
Model monitoring pipeline for Edge devices</h2>
<h3><a class="anchor" id="autotoc_md2"></a>
Model Training - Use the lensai_profiler_python</h3>
<p>During the model training process, It is important to profile the base line metrics, so that later they can be used for the drift and error approximation. use the lensai_profiler_python : <a href="https://github.com/lens-ai/lensai_profiler_python">github</a> library to profile the training data. This step is crucial for establishing baseline profiles for data and model performance.</p>
<h3><a class="anchor" id="autotoc_md3"></a>
Model Deployment - Use the lensai_profiler_cpp (As most of the edge models inference happens using C++)</h3>
<p>During model deployment, integrate this Lensai C++ profiling code. This integration profiles athe real-time data and model metrics during inference, enabling continuous monitoring. It also samples the data that the model is most uncertain about using multiple sampling techniques.</p>
<h3><a class="anchor" id="autotoc_md4"></a>
Monitoring - Use lensai Monitoring Server</h3>
<p>Use the LensAI Server to monitor data and model drift by comparing profiles from the training phase and real-time data obtained during inference. <a href="https://github.com/lens-ai/lensai_monitoring_server">github</a> Detailed instructions and implementation examples are available in the examples directory.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md6"></a>
Key Advantages of using Lens AI summarized</h2>
<ul>
<li>The time complexity of the distribution profiles are sublinear space and time</li>
<li>The space complexity is ùëÇ(1/ùúñlog(ùúñùëÅ)) where as classical logging it is O(N).</li>
<li>The time complexity while insertion and query time is O(log(1/œµ)), where as classical logging it is O(N log(N))</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md8"></a>
Memory Efficiency</h2>
<h4><a class="anchor" id="autotoc_md9"></a>
Fixed Memory Usage:</h4>
<p>The data structures used by Lens AI operate with a fixed amount of memory, making them ideal for applications with memory constraints or long-running processes where memory usage must remain predictable and bounded.</p>
<h4><a class="anchor" id="autotoc_md10"></a>
Scalability:</h4>
<p>Unlike classical histograms that might require more memory as more data is processed or as data complexity increases (e.g., higher resolution, multiple channels), these sketches maintain a consistent memory footprint, ensuring efficient scalability.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md12"></a>
Accuracy and Error Bounds</h2>
<h4><a class="anchor" id="autotoc_md13"></a>
Provable Error Guarantees:</h4>
<p>Lens AI's data structures provide quantifiable error bounds for their approximations. This allows control over the trade-off between memory usage and accuracy, ensuring reliable results within acceptable error margins.</p>
<h4><a class="anchor" id="autotoc_md14"></a>
Adaptability:</h4>
<p>These data structures dynamically adjust to the data distribution, providing better accuracy for varying data, unlike classical histograms that might become less accurate if the data distribution changes significantly.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md16"></a>
Flexibility in Queries</h2>
<h4><a class="anchor" id="autotoc_md17"></a>
Quantile Queries:</h4>
<p>Lens AI leverages KLL sketches for highly efficient quantile queries, essential for understanding data distributions and for various statistical analyses. Classical histograms require additional processing to derive quantiles, which can be computationally expensive and less accurate.</p>
<h4><a class="anchor" id="autotoc_md18"></a>
Versatile Statistical Summaries:</h4>
<p>The datastructures allow for efficient computation of a wide range of statistical summaries, making them suitable for complex data analysis tasks beyond simple frequency counts.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md20"></a>
Computational Efficiency</h2>
<h4><a class="anchor" id="autotoc_md21"></a>
Stream Processing:</h4>
<p>KLL datastructures are designed for incremental updates, making them highly efficient for streaming data scenarios. Each insertion has an amortized logarithmic time complexity, which is manageable even for high-throughput data streams.</p>
<h4><a class="anchor" id="autotoc_md22"></a>
Avoiding Reprocessing:</h4>
<p>In streaming data applications, the sketches handle data incrementally without the need to reprocess entire datasets, unlike classical methods that might require recalculating histograms from scratch when new data arrives.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md24"></a>
Practical Advantages</h2>
<h4><a class="anchor" id="autotoc_md25"></a>
Consistent Performance:</h4>
<p>In practice, these sketches offer high accuracy for quantile estimation with significantly less memory usage than exact methods, making them a practical choice for many real-world applications.</p>
<h4><a class="anchor" id="autotoc_md26"></a>
Handling High-Dimensional Data:</h4>
<p>In scenarios involving high-resolution images or multiple channels (e.g., RGB), the sketches manage the complexity efficiently, avoiding the pitfalls of multidimensional histograms which can be cumbersome and memory-intensive.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md28"></a>
Simplified Data Management</h2>
<h4><a class="anchor" id="autotoc_md29"></a>
Automatic Range Adjustment:</h4>
<p>The sketches automatically adjust to the range and distribution of incoming data, reducing the need for manual tuning of bin ranges and resolutions, often required in classical histograms.</p>
<h4><a class="anchor" id="autotoc_md30"></a>
Unified Data Structure:</h4>
<p>Using a single, unified data structure for summarizing distributions simplifies data management and processing pipelines, reducing complexity and potential for errors.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md32"></a>
Mergeability Across Sensors:</h2>
<p>The sketches are designed for distributed computing environments where data may be processed across multiple nodes or systems. They can be merged efficiently across nodes to provide a unified view of the data distribution, enabling scalable processing of large datasets.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md34"></a>
Product Dashboard:</h2>
<p>Please find the product roadmap and next planned releases [here]()</p>
<hr  />
<h2><a class="anchor" id="autotoc_md36"></a>
Prerequisites</h2>
<p>Before you begin, ensure you have met the following requirements:</p><ul>
<li>libboost-all-dev</li>
<li>libcurl4-openssl-dev</li>
<li>libtar-dev</li>
<li>libssl-dev</li>
<li>libgtest-dev</li>
<li>libopencv-dev</li>
</ul>
<h2><a class="anchor" id="autotoc_md37"></a>
Table of Contents</h2>
<ul>
<li><a href="#installation">Installation</a><ul>
<li><a href="#from-source">From Source</a></li>
<li><a href="#prebuilt-packages">Prebuilt Packages</a></li>
<li><a href="#docker-images">Docker Images</a></li>
</ul>
</li>
<li><a href="#usage">Usage</a></li>
<li><a href="#api-reference">API Reference</a></li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#license">License</a></li>
<li><a href="#contact">Contact</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md38"></a>
Installation</h2>
<h4><a class="anchor" id="autotoc_md39"></a>
Prerequisites</h4>
<ul>
<li>C++17 or higher</li>
<li>CMake 3.10 or higher</li>
</ul>
<h4><a class="anchor" id="autotoc_md40"></a>
From Source</h4>
<p><a class="anchor" id="autotoc_md41"></a> </p><h5>Clone the repository</h5>
<div class="fragment"><div class="line"> https://github.com/lens-ai/lensai_profiler_cpp.git</div>
<div class="line"> cd datatracer</div>
<div class="line">mkdir build</div>
</div><!-- fragment --><p> <a class="anchor" id="autotoc_md42"></a> </p><h5>Build libraries with debug</h5>
<div class="fragment"><div class="line">cd build</div>
<div class="line">cmake ..</div>
<div class="line">make</div>
</div><!-- fragment --><p> <a class="anchor" id="autotoc_md43"></a> </p><h5>Build for Release</h5>
<div class="fragment"><div class="line">cd build</div>
<div class="line">cmake .. -D CMAKE_BUILD_TYPE=RELEASE</div>
<div class="line">make</div>
</div><!-- fragment --><p> <a class="anchor" id="autotoc_md44"></a> </p><h5>Run test</h5>
<div class="fragment"><div class="line">cd build</div>
<div class="line">cmake ..</div>
<div class="line">make</div>
<div class="line">make test</div>
</div><!-- fragment --><p> <a class="anchor" id="autotoc_md45"></a> </p><h5>Build Example</h5>
<div class="fragment"><div class="line">cd build</div>
<div class="line">cmake ..</div>
<div class="line">make</div>
<div class="line">make TFLiteCheck</div>
</div><!-- fragment --><p> <a class="anchor" id="autotoc_md46"></a> </p><h5>Build using docker</h5>
<div class="fragment"><div class="line">cd Docker</div>
<div class="line">./build.sh</div>
</div><!-- fragment --> <h4><a class="anchor" id="autotoc_md47"></a>
Prebuilt Packages</h4>
<p>You can download and install prebuilt packages for various platforms:</p>
<p>Debian: Download Lensai-v1.0.0-linux.tar.gz Raspian: Download Lensai-v1.0.0-linux.tar.gz</p>
<p>Installation Instructions</p>
<p>For Linux: tar -xzf Lensai-v1.0.0-linux.tar.gz sudo cp -r Lensai /usr/local/</p>
<h4><a class="anchor" id="autotoc_md48"></a>
Docker Images</h4>
<ul>
<li>docker pull vsnm/lensai_profiler_cpp:latest</li>
<li>docker run -it &ndash;rm vsnm/lensai_profiler_cpp</li>
</ul>
<h3><a class="anchor" id="autotoc_md49"></a>
Usage</h3>
<p>Please refer the examples directory for the detailed implementation examples.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> saveIntervalSec = 1;</div>
<div class="line"><span class="keywordtype">int</span> img_channels = 3;</div>
<div class="line">std::string modelName = <span class="stringliteral">&quot;Cat_dog_classfier_0.1&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><a class="code" href="classImageProfile.html">ImageProfile</a> image_profile(configFile, saveIntervalSec, channels);</div>
<div class="line"><a class="code" href="classModelProfile.html">ModelProfile</a> model_profile(modelName, configFile, saveIntervalSec, channels);</div>
<div class="line"><a class="code" href="classImageSampler.html">ImageSampler</a> image_sampler(configFile, saveIntervalSec);</div>
<div class="line"> </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;profiling image profile&quot;</span> &lt;&lt;std::endl;</div>
<div class="line">image_profile.profile(frame, <span class="keyword">true</span>);</div>
<div class="line"> </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;profiling model profile&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">model_profile.log_classification_model_stats(10.0, top_results);</div>
<div class="line">  </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;profiling samper&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">image_sampler.sample(top_results, image, <span class="keyword">true</span>);</div>
<div class="ttc" id="aclassImageProfile_html"><div class="ttname"><a href="classImageProfile.html">ImageProfile</a></div><div class="ttdoc">A class for analyzing and storing image statistics.</div><div class="ttdef"><b>Definition:</b> imageprofile.h:32</div></div>
<div class="ttc" id="aclassImageSampler_html"><div class="ttname"><a href="classImageSampler.html">ImageSampler</a></div><div class="ttdoc">Class for selecting uncertain image samples for further analysis based on various confidence metrics.</div><div class="ttdef"><b>Definition:</b> imagesampler.h:33</div></div>
<div class="ttc" id="aclassModelProfile_html"><div class="ttname"><a href="classModelProfile.html">ModelProfile</a></div><div class="ttdoc">Class for computing and managing various model statistics.</div><div class="ttdef"><b>Definition:</b> modelprofile.h:26</div></div>
</div><!-- fragment --><p> Refer to the examples in the example folder</p>
<h2><a class="anchor" id="autotoc_md50"></a>
API Reference:</h2>
<p>Refer to the <a href="github.com">documentation</a> </p>
<h2><a class="anchor" id="autotoc_md51"></a>
Contributors</h2>
<h4><a class="anchor" id="autotoc_md52"></a>
Venkata Pydipalli</h4>
<p>Looking for the more contributors with Love. </p>
<h2><a class="anchor" id="autotoc_md53"></a>
License</h2>
<p>Apache 2 </p>
<h2><a class="anchor" id="autotoc_md54"></a>
Credits</h2>
<p>Apache Datasketches </p>
<h2><a class="anchor" id="autotoc_md55"></a>
Contact</h2>
<p><a href="#" onclick="location.href='mai'+'lto:'+'vsn'+'m.'+'tej'+'@g'+'mai'+'l.'+'com'; return false;">vsnm.<span style="display: none;">.nosp@m.</span>tej@<span style="display: none;">.nosp@m.</span>gmail<span style="display: none;">.nosp@m.</span>.com</a> </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
